(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{271:function(e,s,t){Promise.resolve().then(t.bind(t,3708))},3708:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var r=t(9268),a=t(3702),n=t(8298),o=t(8176),i=t(4390),d=t(315),c=t(8958),l=t(6006);let u="http://178.128.123.212:5000/api/v1/admin/companies";function h(e){var s;return{id:e.company_id,name:e.company_name,address:e.address,provinceId:e.province_id,products:(null===(s=e.products)||void 0===s?void 0:s.map(e=>({id:e.product_id,name:e.product_name_th||e.product_name_en,status:e.verify_status||"N/A"})))||[]}}let m={getCompanies:()=>fetch(u,{headers:{"Cache-Control":"no-cache"}}).then(e=>{if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>e.map(h)),getCompanyById:e=>fetch("".concat(u,"/").concat(e),{headers:{"Cache-Control":"no-cache"}}).then(e=>{if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.json()}).then(h)};var p=()=>{let[e,s]=(0,l.useState)([]),[t,u]=(0,l.useState)(null),[h,p]=(0,l.useState)(!1),[f]=(0,l.useState)(""),[x,j]=(0,l.useState)(""),v=(0,l.useRef)(null),y=e.filter(e=>e.name.toLowerCase().includes(x.toLowerCase()));return(0,l.useEffect)(()=>{m.getCompanies().then(s).catch(()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.show({severity:"error",summary:"Error",detail:"Could not fetch companies",life:3e3})})},[]),(0,r.jsx)("div",{className:"grid company-demo",children:(0,r.jsx)("div",{className:"col-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)(c.F,{ref:v}),(0,r.jsxs)("div",{className:"flex justify-content-between align-items-center mb-4",children:[(0,r.jsx)("h5",{children:"บริษัท"}),(0,r.jsxs)("span",{className:"p-input-icon-left mr-3",children:[(0,r.jsx)("i",{className:"pi pi-search"}),(0,r.jsx)(d.o,{type:"search",placeholder:"ค้นหาด้วยชื่อบริษัท...",value:x,onChange:e=>j(e.target.value),className:"w-full"})]})]}),(0,r.jsxs)(o.w,{value:y,globalFilter:f,emptyMessage:"No companies found",children:[(0,r.jsx)(n.s,{field:"index",header:"ลำดับ",body:(e,s)=>{let{rowIndex:t}=s;return t+1},style:{width:"100px"}}),(0,r.jsx)(n.s,{field:"name",header:"ชื่อบริษัท",sortable:!0}),(0,r.jsx)(n.s,{field:"address",header:"ที่อยู่",sortable:!0}),(0,r.jsx)(n.s,{field:"id",header:"รหัส",sortable:!0}),(0,r.jsx)(n.s,{body:e=>(0,r.jsx)(a.z,{icon:"pi pi-eye",rounded:!0,severity:"info",className:"mr-2",onClick:()=>{u(e),p(!0)}})})]}),(0,r.jsx)(i.V,{visible:h,style:{width:"800px"},header:"Company Products",modal:!0,footer:(0,r.jsx)(a.z,{label:"Close",icon:"pi pi-times",onClick:()=>p(!1)}),onHide:()=>p(!1),children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:[t.name,"'s Products"]}),(0,r.jsxs)(o.w,{value:t.products,paginator:!0,rows:5,emptyMessage:"No products found.",children:[(0,r.jsx)(n.s,{field:"id",header:"รหัสผลิตภัณฑ์",sortable:!0}),(0,r.jsx)(n.s,{field:"name",header:"ชื่อผลิตภัณฑ์",sortable:!0}),(0,r.jsx)(n.s,{field:"status",header:"สถานะ",sortable:!0})]})]})})]})})})}}},function(e){e.O(0,[123,434,347,702,562,565,958,253,769,744],function(){return e(e.s=271)}),_N_E=e.O()}]);