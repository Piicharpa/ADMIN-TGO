(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{6180:function(e,t,n){Promise.resolve().then(n.bind(n,7556))},2494:function(e,t,n){"use strict";var r=n(9268);n(6006);var i=n(4390),a=n(3702);t.Z=e=>{let{visible:t,onHide:n,onConfirm:o,message:l}=e,s=(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(a.z,{label:"ไม่",icon:"pi pi-times",outlined:!0,onClick:n}),(0,r.jsx)(a.z,{label:"ใช่",icon:"pi pi-check",severity:"danger",onClick:o})]});return(0,r.jsx)(i.V,{visible:t,style:{width:"450px"},header:"ยืนยันการลบ",modal:!0,footer:s,onHide:n,children:(0,r.jsxs)("div",{className:"flex align-items-center justify-content-center",children:[(0,r.jsx)("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem",color:"var(--red-500)"}}),(0,r.jsx)("span",{children:l})]})})}},7556:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(9268),i=n(6006),a=n(8176),o=n(8298),l=n(8958),s=n(315),u=n(3142),c=n(9424),d=n(5942),p=n(6878),f=n(9347);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=p.V.extend({defaultProps:{__TYPE:"SelectButton",id:null,value:null,options:null,optionLabel:null,optionValue:null,optionDisabled:null,tabIndex:null,multiple:!1,unselectable:!0,allowEmpty:!0,disabled:!1,style:null,className:null,dataKey:null,tooltip:null,tooltipOptions:null,itemTemplate:null,onChange:null,children:void 0},css:{classes:{root:function(e){var t=e.props;return(0,d.AK)("p-selectbutton p-buttonset p-component",t.className)},button:function(e){var t=e.itemProps,n=e.focusedState;return(0,d.AK)("p-button p-component",{"p-highlight":t.selected,"p-disabled":t.disabled,"p-focus":n})},label:"p-button-label p-c"}}}),g=i.memo(function(e){var t,n,r=function(e){if(Array.isArray(e))return e}(t=i.useState(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(t,2)||b(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=r[0],o=r[1],l=e.ptm,s=e.cx,u=function(t){return l(t,{hostName:e.hostName,context:{selected:e.selected,disabled:e.disabled,option:e.option}})},c=function(t){e.onClick&&e.onClick({originalEvent:t,option:e.option})},p=(n=(0,d.dG)({className:s("label")},u("label")),e.template?d.gb.getJSXElement(e.template,e.option):i.createElement("span",n,e.label)),m=(0,d.dG)({className:(0,d.AK)(e.className,s("button",{itemProps:e,focusedState:a})),role:"button","aria-label":e.label,"aria-pressed":e.selected,onClick:c,onKeyDown:function(e){32===e.which&&(c(e),e.preventDefault())},tabIndex:e.tabIndex,onFocus:function(){o(!0)},onBlur:function(){o(!1)}},u("button"));return i.createElement("div",m,p,!e.disabled&&i.createElement(f.H,null))});g.displayName="SelectButtonItem";var x=i.memo(i.forwardRef(function(e,t){var n=i.useContext(u.Ou),r=y.getProps(e,n),a=i.useRef(null),o=y.setMetaData({props:r}),l=o.ptm,s=o.cx,p=function(e){if(!(r.disabled||h(e.option))){var t,n=b(e.option);if(!n||r.unselectable&&r.allowEmpty){var i=f(e.option);if(r.multiple){var a=r.value?v(r.value):[];t=n?a.filter(function(e){return!d.gb.equals(e,i,r.dataKey)}):[].concat(v(a),[i])}else t=n?null:i;r.onChange&&r.onChange({originalEvent:e.originalEvent,value:t,stopPropagation:function(){e.originalEvent.stopPropagation()},preventDefault:function(){e.originalEvent.preventDefault()},target:{name:r.name,id:r.id,value:t}})}}},f=function(e){return r.optionValue?d.gb.resolveFieldData(e,r.optionValue):e&&void 0!==e.value?e.value:e},h=function(e){return r.optionDisabled?d.gb.isFunction(r.optionDisabled)?r.optionDisabled(e):d.gb.resolveFieldData(e,r.optionDisabled):!!e&&void 0!==e.disabled&&e.disabled},b=function(e){var t=f(e);return r.multiple?!!r.value&&!!r.value.length&&r.value.some(function(e){return d.gb.equals(e,t,r.dataKey)}):d.gb.equals(r.value,t,r.dataKey)};i.useImperativeHandle(t,function(){return{props:r,focus:function(){return d.p7.focusFirstElement(a.current)},getElement:function(){return a.current}}});var x=d.gb.isNotEmpty(r.tooltip),j=r.options&&r.options.length?r.options.map(function(e,t){var n=r.disabled||h(e),a=r.optionLabel?d.gb.resolveFieldData(e,r.optionLabel):e&&void 0!==e.label?e.label:e,o=b(e);return i.createElement(g,{hostName:"SelectButton",key:a+"_"+t,label:a,className:e.className,option:e,onClick:p,template:r.itemTemplate,selected:o,tabIndex:n?null:0,disabled:n,ptm:l,cx:s})}):null,_=(0,d.dG)({ref:a,id:r.id,className:s("root"),style:r.style,role:"group"},y.getOtherProps(r),l("root"));return i.createElement(i.Fragment,null,i.createElement("div",_,j),x&&i.createElement(c.u,m({target:a,content:r.tooltip},r.tooltipOptions,{pt:l("tooltip")})))}));x.displayName="SelectButton";var j=n(3702),_=n(4390),S=n(4631),O=e=>{var t;let{visible:n,verifier:i,submitted:a,onHide:o,onSave:l,onChange:u}=e,c=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.z,{label:"ยกเลิก",icon:"pi pi-times",text:!0,onClick:o}),(0,r.jsx)(j.z,{label:"บันทึก",icon:"pi pi-check",text:!0,onClick:l})]});return(0,r.jsxs)(_.V,{visible:n,style:{width:"450px"},header:"รายละเอียดผู้ทวนสอบ",modal:!0,className:"p-fluid",footer:c,onHide:o,children:[(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"ชื่อ *"}),(0,r.jsx)(s.o,{value:i.name,onChange:e=>u(e,"name"),className:(0,d.AK)({"p-invalid":a&&!i.name})})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"รหัสการลงทะเบียน *"}),(0,r.jsx)(s.o,{value:i.register_id,onChange:e=>u(e,"register_id"),className:(0,d.AK)({"p-invalid":a&&!i.register_id})})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"คำนำหน้าชื่อ"}),(0,r.jsx)(s.o,{value:i.prefix_name,onChange:e=>u(e,"prefix_name")})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"อีเมล"}),(0,r.jsx)(s.o,{value:i.description,onChange:e=>u(e,"description")})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"ความเชี่ยวชาญ"}),(0,r.jsx)(s.o,{value:i.expertise,onChange:e=>u(e,"expertise")})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"องค์กร"}),(0,r.jsx)(s.o,{value:i.organization,onChange:e=>u(e,"organization")})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"ที่อยู่"}),(0,r.jsx)(S.g,{rows:3,value:i.address,onChange:e=>u(e,"address")})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"เบอร์โทรศัพท์"}),(0,r.jsx)(s.o,{value:i.phone_number,onChange:e=>u(e,"phone_number")})]}),(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{children:"รหัสไปรษณีย์"}),(0,r.jsx)(s.o,{value:null===(t=i.zipcode)||void 0===t?void 0:t.toString(),onChange:e=>u({value:parseInt(e.target.value)||0},"zipcode")})]})]})},N=n(2494);let w="".concat("http://178.128.123.212:5000/api/v1","/auditor");function C(e){return{auditor_id:e.auditor_id,user_id:e.user_id,name:e.name,register_id:e.register_id,description:e.description,expertise:e.expertise,organization:e.organization,address:e.address,subdistrict_id:e.subdistrict_id,district_id:e.district_id,province_id:e.province_id,zipcode:e.zipcode,phone_number:e.phone_number,registration_date:e.registration_date,created_date:e.created_date,updated_date:e.updated_date,prefix_name:e.prefix_name}}function E(e){let t={...e};return t.registration_date&&(t.registration_date=new Date(t.registration_date).toISOString().split("T")[0]),t.created_date&&(t.created_date=new Date(t.created_date).toISOString().split("T")[0]),t.updated_date&&(t.updated_date=new Date(t.updated_date).toISOString().split("T")[0]),t}let P={getVerifiers:()=>fetch(w,{headers:{"Cache-Control":"no-cache"}}).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>e.map(C)),getVerifierById:e=>fetch("".concat(w,"/").concat(e),{headers:{"Cache-Control":"no-cache"}}).then(e=>e.ok?e.json():Promise.reject(e)).then(C),createVerifier(e){let t=E(e);return fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.ok?e.json():Promise.reject(e)).then(C)},updateVerifier(e){let t=E(e);return fetch("".concat(w,"/").concat(e.auditor_id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.ok?e.json():Promise.reject(e)).then(C)},deleteVerifier:e=>fetch("".concat(w,"/").concat(e),{method:"DELETE"}).then(e=>e.ok?e.json():Promise.reject(e))},k={auditor_id:0,user_id:0,name:"",register_id:"",description:"",expertise:"",organization:"",address:"",subdistrict_id:0,district_id:0,province_id:0,zipcode:0,phone_number:"",registration_date:"",created_date:"",updated_date:"",prefix_name:"",status:"pending"};var z=()=>{let[e,t]=(0,i.useState)(0),[n,u]=(0,i.useState)([]),[c,d]=(0,i.useState)(null),[p,f]=(0,i.useState)(k),[m,h]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!1),[y,g]=(0,i.useState)(!1),[S,w]=(0,i.useState)(!1),[C,E]=(0,i.useState)(!1),[z,I]=(0,i.useState)(""),[D,F]=(0,i.useState)(!1),K=(0,i.useRef)(null);(0,i.useEffect)(()=>{V(e)},[e]);let V=e=>{F(!0),P.getVerifiers().then(t=>{let n=1===e?t.filter(e=>"pending"===e.status):2===e?t.filter(e=>"successful"===e.status):t;u(n)}).catch(()=>{var e;null===(e=K.current)||void 0===e||e.show({severity:"error",summary:"Error",detail:"Cannot fetch data"})}).finally(()=>F(!1))},T=t=>{V(e),f({...t}),v(!0)},A=e=>{f({...e}),g(!0)},B=e=>{f(e),w(!0)},R=n.filter(e=>e.name.toLowerCase().includes(z.toLowerCase()));return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)(l.F,{ref:K}),(0,r.jsxs)("div",{className:"flex justify-content-between mb-4",children:[(0,r.jsx)("h5",{children:"ผู้ทวนสอบ"}),(0,r.jsx)(s.o,{placeholder:"ค้นหาชื่อ...",value:z,onChange:e=>I(e.target.value)})]}),(0,r.jsx)(x,{value:e,onChange:e=>t(e.value),options:[{label:"ทั้งหมด",value:0},{label:"รอการพิจารณา",value:1},{label:"ได้รับการพิจารณาแล้ว",value:2}],optionLabel:"label",className:"mb-4"}),(0,r.jsxs)(a.w,{value:R,selection:c,onSelectionChange:e=>d(e.value),dataKey:"auditor_id",paginator:!0,rows:10,loading:D,children:[(0,r.jsx)(o.s,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),(0,r.jsx)(o.s,{field:"name",header:"ชื่อผู้ทวนสอบ"}),(0,r.jsx)(o.s,{field:"register_id",header:"รหัสการลงทะเบียน"}),(0,r.jsx)(o.s,{field:"registration_date",header:"วันที่ลงทะเบียน"}),(0,r.jsx)(o.s,{body:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.z,{icon:"pi pi-eye",rounded:!0,severity:"info",className:"mr-2",onClick:()=>A(e)}),(0,r.jsx)(j.z,{icon:"pi pi-pencil",rounded:!0,severity:"success",className:"mr-2",onClick:()=>T(e)}),(0,r.jsx)(j.z,{icon:"pi pi-trash",rounded:!0,severity:"danger",onClick:()=>B(e)})]})})]}),(0,r.jsx)(O,{visible:b,verifier:p,submitted:m,onHide:()=>v(!1),onSave:()=>{if(h(!0),!p.name||!p.register_id)return;let t=p.auditor_id?P.updateVerifier(p):P.createVerifier(p);t.then(()=>{var t;V(e),v(!1),f(k),null===(t=K.current)||void 0===t||t.show({severity:"success",summary:"สำเร็จ"})}).catch(()=>{var e;return null===(e=K.current)||void 0===e?void 0:e.show({severity:"error",summary:"เกิดข้อผิดพลาด"})})},onChange:(e,t)=>f({...p,[t]:"value"in e?e.value:e.target.value})}),(0,r.jsxs)(_.V,{visible:y,header:"รายละเอียดผู้ทวนสอบ",modal:!0,onHide:()=>g(!1),children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"รหัสผู้ทวนสอบ:"})," ",p.auditor_id]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"ชื่อ:"})," ",p.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"รหัสลงทะเบียน:"})," ",p.register_id]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"วันที่ลงทะเบียน:"})," ",p.registration_date]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"อีเมล:"})," ",p.description]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"ความเชี่ยวชาญ:"})," ",p.expertise]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"องค์กร:"})," ",p.organization]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("b",{children:"ที่อยู่:"})," ",p.address]})]}),(0,r.jsx)(N.Z,{visible:S,onHide:()=>w(!1),onConfirm:()=>{P.deleteVerifier(p.auditor_id).then(()=>{V(e),w(!1),f(k)})},message:"คุณแน่ใจว่าจะลบ ".concat(p.name,"?")}),(0,r.jsx)(N.Z,{visible:C,onHide:()=>E(!1),onConfirm:()=>{c&&Promise.all(c.map(e=>P.deleteVerifier(e.auditor_id))).then(()=>{V(e),E(!1),d(null)})},message:"คุณแน่ใจว่าจะลบ ".concat(null==c?void 0:c.length," รายการ?")})]})}},4631:function(e,t,n){"use strict";n.d(t,{g:function(){return m}});var r=n(6006),i=n(3142),a=n(6878),o=n(5497),l=n(9424),s=n(5942);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=a.V.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0},css:{classes:{root:function(e){var t=e.props,n=e.isFilled;return(0,s.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":t.disabled,"p-filled":n,"p-inputtextarea-resizable":t.autoResize},t.className)}},styles:"\n@layer primereact {\n    .p-inputtextarea-resizable {\n        overflow: hidden;\n        resize: none;\n    }\n    \n    .p-fluid .p-inputtextarea {\n        width: 100%;\n    }\n}\n"}});function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){!function(e,t,n){var r;r=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===c(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=r.memo(r.forwardRef(function(e,t){var n=r.useContext(i.Ou),c=d.getProps(e,n),p=r.useRef(t),m=r.useRef(0),h=d.setMetaData(f(f({props:c},c.__parentMetadata),{},{context:{disabled:c.disabled}})),b=h.ptm,v=h.cx,y=h.isUnstyled;(0,a.e)(d.css.styles,y,{name:"inputtextarea"});var g=function(e){var t=p.current;t&&s.p7.isVisible(t)&&(m.current||(m.current=t.scrollHeight,t.style.overflow="hidden"),(m.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",m.current=t.scrollHeight))};r.useEffect(function(){s.gb.combinedRefs(p,t)},[p,t]),r.useEffect(function(){c.autoResize&&g(!0)},[c.autoResize]);var x=r.useMemo(function(){return s.gb.isNotEmpty(c.value)||s.gb.isNotEmpty(c.defaultValue)},[c.value,c.defaultValue]),j=s.gb.isNotEmpty(c.tooltip),_=(0,s.dG)({ref:p,className:v("root",{isFilled:x}),onFocus:function(e){c.autoResize&&g(),c.onFocus&&c.onFocus(e)},onBlur:function(e){c.autoResize&&g(),c.onBlur&&c.onBlur(e)},onKeyUp:function(e){c.autoResize&&g(),c.onKeyUp&&c.onKeyUp(e)},onKeyDown:function(e){c.onKeyDown&&c.onKeyDown(e),c.keyfilter&&o.F.onKeyPress(e,c.keyfilter,c.validateOnly)},onBeforeInput:function(e){c.onBeforeInput&&c.onBeforeInput(e),c.keyfilter&&o.F.onBeforeInput(e,c.keyfilter,c.validateOnly)},onInput:function(e){var t=e.target;c.autoResize&&g(s.gb.isEmpty(t.value)),c.onInput&&c.onInput(e),s.gb.isNotEmpty(t.value)?s.p7.addClass(t,"p-filled"):s.p7.removeClass(t,"p-filled")},onPaste:function(e){c.onPaste&&c.onPaste(e),c.keyfilter&&o.F.onPaste(e,c.keyfilter,c.validateOnly)}},d.getOtherProps(c),b("root"));return r.createElement(r.Fragment,null,r.createElement("textarea",_),j&&r.createElement(l.u,u({target:p,content:c.tooltip},c.tooltipOptions,{pt:b("tooltip")})))}));m.displayName="InputTextarea"}},function(e){e.O(0,[123,434,347,702,562,565,958,253,769,744],function(){return e(e.s=6180)}),_N_E=e.O()}]);